# Phenotype data

Phenotype data is derived from images generated by the indoor LemnaTec Scanalyzer 3D platform at the Donald Danforth Plant Science Center using [PlantCV](http://plantcv.danforthcenter.org).  PlantCV is an image analysis package for plant phenotyping. PlantCV is composed of modular functions in order to be applicable to a variety of plant types and imaging systems. PlantCV contains base functions that are required to examine images from an excitation imaging fluorometer \(PSII\), visible spectrum camera \(VIS\), and near-infrared camera \(NIR\). PlantCV is a fully open source project: [https:\/\/github.com\/danforthcenter\/plantcv](https://github.com/danforthcenter/plantcv). For more information, see:

Project website: [http:\/\/plantcv.danforthcenter.org](http://plantcv.danforthcenter.org)

Full documentation: [http:\/\/plantcv.readthedocs.io\/en\/latest](http://plantcv.readthedocs.io/en/latest/)

Publication: [http:\/\/dx.doi.org\/10.1016\/j.molp.2015.06.005](http://dx.doi.org/10.1016/j.molp.2015.06.005)

Demo Jupyter Notebook: [https:\/\/github.com\/terraref\/computing-pipeline\/blob\/master\/demos\/plantcv\/plantcv\_jupyter\_demo.ipynb](https://github.com/terraref/computing-pipeline/blob/master/demos/plantcv/plantcv_jupyter_demo.ipynb)

For the TERRA-REF project, a PlantCV Clowder extractor was developed to analyze data from the [Bellwether Foundation Phenotyping Facility](http://www.danforthcenter.org/scientists-research/core-technologies/phenotyping) at the Donald Danforth Plant Science Center. Resulting phenotype data is stored in BETYdb.

## **Data access**

* **Clowder**: [ddpscIndoorSuite](https://terraref.ncsa.illinois.edu/clowder/collection/5801db174f0c4d7a6b209f77)
* **Globus**: `/sites/danforth/raw_data/<experiment name>`
* **BETYdb**: [https:\/\/terraref.ncsa.illinois.edu\/bety](https://terraref.ncsa.illinois.edu/bety)

For details about accessing BETYdb, please see [Data Access](../user/how-to-access-data.md) section.

## Computational pipeline

**[PlantCV extractor](https://github.com/terraref/extractors-lemnatec-indoor)**

* **Description**: Processes VIS\/NIR images captured at several angles to generate trait metadata. The trait metadata is associated with the source images in Clowder, and uploaded to the configured BETYdb instance.

* **Output CSV**: `/sites/danforth/Level_1/<experiment name>`


_Input_

* Evaluation is triggered whenever a file is added to a dataset
* Following images must be found
  * 4x NIR side-view = NIR_SV_0, NIR_SV_90, NIR_SV_180, NIR_SV_270
  * 1x NIR top-view = NIR\_TV
  * 4x VIS side-view = VIS_SV_0, VIS_SV_90, VIS_SV_180, VIS_SV_270
  * 1x VIS top-view = VIS\_TV

* Per-image metadata in Clowder is required for BETYdb submission; this is how barcode\/genotype\/treatment\/timestamp are determined.

_Output_

* Each image will have new metadata appended in Clowder including measures like height, area, perimeter, and longest\_axis
* Average traits for the dataset \(10 images\) are inserted into a CSV file and added to the Clowder dataset
* If configured, the CSV will also be sent to BETYdb

